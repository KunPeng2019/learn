webpackJsonp([44],{TfxV:function(e,t){},iJ8j:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),i=a.n(s),r=a("exGp"),n=a.n(r),o=a("3pLw"),l=a("VsUZ"),c={name:"",components:{},props:{},data:function(){return{formLabelWidth:"160px",imgHead:"",dialogGender:"",userid:"",username:"",usertype:"",fileList:[],selectArr:[],isGetImg:!1,createLoading1:!1,dialogImg:"",chooseImg:"",form:{name:"",User:[]},rules:{}}},computed:{},watch:{},mounted:function(){var e=this;return n()(i.a.mark(function t(){var a,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.GetDownloadFileURL();case 2:a=t.sent,e.imgHead=a+"?filename=",(s=o.a.getUser())&&(e.userid=s.UserID,e.username=s.UserName,e.usertype=s.UserType),e.getdata();case 7:case"end":return t.stop()}},t,e)}))()},methods:{getdata:function(){var e=this;return n()(i.a.mark(function t(){var a,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=e.usertype){t.next=7;break}return t.next=3,o.a.get(l.a.getBasicInfo,{uid:e.userid,Token:o.a.getToken()});case 3:(a=t.sent).Result?null!=a.Data&&a.Data.length>0&&(e.dialogID=a.Data[0].TeacherID,e.dialogImg=a.Data[0].TeacherPhoto,e.dialogName=a.Data[0].TeacherName):e.$message({showClose:!0,message:a.message,type:a.type}),t.next=11;break;case 7:return t.next=9,o.a.get(l.a.getBasicInfoStu,{uid:e.userid,Token:o.a.getToken()});case 9:(s=t.sent).Result?(e.dialogID=s.Data[0].StudentID,e.dialogImg=s.Data[0].StudentPhoto,e.dialogName=s.Data[0].StudentName):e.$message({showClose:!0,message:s.message,type:s.type});case 11:case"end":return t.stop()}},t,e)}))()},changeImg:function(e){this.dialogFix=!0,e.isThc?this.isDialogStu=!1:this.isDialogStu=!0,e.TeacherWorkingDate?this.dialogDate=e.TeacherWorkingDate:this.dialogDate=e.StudentBirth},closeHandler:function(){this.dialogFix=!1,this.chooseImg="",this.isGetImg=!1,this.file="",this.fileList=[]},handlePreview:function(e,t){this.isGetImg=!0,this.chooseImg=e.url,this.file=e},uploadHandler:function(){var e=this;return n()(i.a.mark(function t(){var a,s,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a="",a=1==e.usertype?l.a.uploadThcImg:l.a.uploadStuImg,s=new FormData,void 0!=e.file&&""!=e.file&&null!=e.file){t.next=6;break}return e.$message({message:"请选择图片",type:"waining"}),t.abrupt("return");case 6:return s.append("stream",e.file.raw),s.append("id",e.dialogID),t.next=10,o.a.postFormData(a,s);case 10:(r=t.sent).type?e.$message({message:r.message,type:r.type}):(e.$message({message:"修改成功",type:"success"}),e.$parent.initData()),e.closeHandler();case 13:case"end":return t.stop()}},t,e)}))()}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"uploadImage"}},[a("div",{staticClass:"main"},[a("div",{staticClass:"tt"},[e._v("上传头像")]),e._v(" "),a("el-form",{ref:"form",staticStyle:{"margin-top":"60px",width:"60%"},attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"","label-width":e.formLabelWidth,prop:"Name"}},[a("div",{staticClass:"card-infor-imgbox"},[e._v("\n          当前用户头像：\n          "),a("div",{staticClass:"dialog-img",class:{"boy-img":"男性"==e.dialogGender&&""==e.dialogImg,"girl-img":"女性"==e.dialogGender&&""==e.dialogImg},on:{click:function(t){e.changeImg(e.i)}}},[""!=e.dialogImg?a("img",{attrs:{src:e.imgHead+e.dialogImg+"&fileType=1&platFormType=1"}}):e._e()])]),e._v(" "),a("div",{staticClass:"card-infor-tip"},[e._v("请选择一个新照片进行上传。")]),e._v(" "),a("el-upload",{staticClass:"upload-img",attrs:{"file-list":e.fileList,limit:1,drag:"",action:"","list-type":"picture","on-change":e.handlePreview,"auto-upload":!1,"show-file-list":!1}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("\n            将文件拖到此处，或\n            "),a("em",[e._v("点击上传")])]),e._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:e.isGetImg,expression:"isGetImg"}],attrs:{src:e.chooseImg}}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.createLoading1,type:"primary"},on:{click:function(t){e.uploadHandler("form")}}},[a("i",{staticClass:"el-icon-check el-icon--left"}),e._v("保 存\n      ")])],1)],1)])},staticRenderFns:[]};var g=a("VU/8")(c,d,!1,function(e){a("TfxV")},null,null);t.default=g.exports}});
//# sourceMappingURL=44.20231227165236.js.map