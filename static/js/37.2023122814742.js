webpackJsonp([37],{Deoy:function(e,t,s){"use strict";t.a={data:function(){return{form:{},rules:{},btnLoading:!1}},created:function(){this.initDict(),this.resetForm()},methods:{initDict:function(){},resetForm:function(){},saveData:function(){}}}},QiXf:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),o=s.n(a),r=s("Deoy"),l=s("oAV5"),i={name:"",components:{},mixins:[r.a],props:{},data:function(){return{editAble:!!this.$route.query.classId,form:{courseName:this.$route.query.courseName||"",courseCode:"",classID:this.$route.query.classId||"",className:"",classroomID:"",classroomName:"",classDate:"",startTime:"",endTime:""},rules:{courseName:{required:!0,min:1,max:60,message:"长度在 1 到 60 个字符",trigger:"blur"},classID:{required:!0,message:"请选择班级",trigger:"blur"},classroomID:{required:!0,message:"请选择教室",trigger:"blur"},classDate:{required:!0,message:"请选择上课日期",trigger:"blur"},startTime:{required:!0,message:"请选择开始时间",trigger:"blur"},endTime:{required:!0,message:"请选择结束时间",trigger:"blur"}},classOptions:[],classRoomOptions:[]}},created:function(){},mounted:function(){var e=this;this.$nextTick(function(){e.$route.query&&e.$route.query.courseId&&(e.form.courseID=e.$route.query.courseId,e.getData())})},methods:{getData:function(){var e=this;!this.form.courseID&&this.form.courseID.length<10||this.$http.get(this.$api.CourseDetail,{courseID:this.form.courseID}).then(function(t){t.Result&&(e.form.courseName=t.Data.CourseName,e.form.courseCode=t.Data.CourseCode,e.form.classID=t.Data.ClassID,e.form.className=t.Data.ClassName,e.form.classroomID=t.Data.ClassroomID,e.form.classroomName=t.Data.ClassroomName,e.form.classDate=Object(l.b)(t.Data.ClassDate,"yyyy-MM-dd"),e.form.startTime=t.Data.StartTime,e.form.endTime=t.Data.EndTime)}).catch(function(e){})},initDict:function(){this.getAllClass(),this.getAllClassRoom()},getAllClass:function(){var e=this;this.classOptions=[],this.$http.get(this.$api.ClsList).then(function(t){t.Result&&t.Datas&&t.Datas.length>0&&t.Datas.forEach(function(t){e.classOptions.push({label:t.ClassName,value:t.ClassID})}),e.form.classID&&e.selectClass(e.form.classID)}).catch(function(e){})},getAllClassRoom:function(){var e=this;this.classRoomOptions=[],this.$http.get(this.$api.getAllClassRoom).then(function(t){t.Result&&t.Datas&&t.Datas.length>0&&t.Datas.forEach(function(t){e.classRoomOptions.push({label:t.ClsRoomName,value:t.ClsRoomID})})}).catch(function(e){})},selectClass:function(e){var t=this.classOptions.find(function(t){return t.value===e});this.form.className=t.label||""},selectClassRoom:function(e){var t=this.classRoomOptions.find(function(t){return t.value===e});this.form.classroomName=t.label||""},preStep:function(){this.$router.push("/main/teacherSpace/prepare/courseView")},saveData:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({showClose:!0,message:"请输入正确格式",type:"error"}),!1;t.btnLoading=!0,t.$http.post(t.form.courseID&&t.form.courseID.length>10?t.$api.CourseUpdate:t.$api.CourseAdd,o()({},t.form,{token:t.$http.getToken()})).then(function(e){e.Result?(t.$message({message:"操作成功！",type:"success"}),setTimeout(function(){t.$router.push("/main/teacherSpace/prepare/courseView")},200)):e.message&&t.$message(o()({showClose:!0},e)),t.btnLoading=!1}).catch(function(e){t.btnLoading=!1})})}},computed:{startPickerOptions:function(){return{selectableRange:"00:00:00 - "+(this.form.endTime?this.form.endTime+":00":"23:59:00")}},endPickerOptions:function(){return{selectableRange:(this.form.startTime?this.form.startTime+":00":"00:00:00")+" - 23:59:00"}}},watch:{}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"create-course"}},[s("div",{staticClass:"main"},[e._m(0),e._v(" "),s("div",{staticClass:"concent"},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px","label-position":"top"}},[s("el-form-item",{attrs:{label:"科目",prop:"courseName"}},[s("el-input",{attrs:{disabled:e.editAble},model:{value:e.form.courseName,callback:function(t){e.$set(e.form,"courseName",t)},expression:"form.courseName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"班级",prop:"classID"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",disabled:e.editAble,placeholder:"请选择班级"},on:{change:e.selectClass},model:{value:e.form.classID,callback:function(t){e.$set(e.form,"classID",t)},expression:"form.classID"}},e._l(e.classOptions,function(t,a){return s("el-option",{key:a,attrs:{label:t.label},model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"item.value"}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"上课日期",prop:"classDate"}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.classDate,callback:function(t){e.$set(e.form,"classDate",t)},expression:"form.classDate"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"开始/结束时间",required:""}},[s("el-col",{attrs:{span:11}},[s("el-form-item",{attrs:{prop:"startTime"}},[s("el-time-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"HH:mm",format:"HH:mm","picker-options":e.startPickerOptions,placeholder:"选择时间"},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1)],1),e._v(" "),s("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]),e._v(" "),s("el-col",{attrs:{span:11}},[s("el-form-item",{attrs:{prop:"endTime"}},[s("el-time-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"HH:mm",format:"HH:mm","picker-options":e.endPickerOptions,placeholder:"选择时间"},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1)],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"上课地点",prop:"classroomID"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择班级"},on:{change:e.selectClassRoom},model:{value:e.form.classroomID,callback:function(t){e.$set(e.form,"classroomID",t)},expression:"form.classroomID"}},e._l(e.classRoomOptions,function(t,a){return s("el-option",{key:a,attrs:{label:t.label},model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"item.value"}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:""}},[s("el-button",{on:{click:e.preStep}},[e._v("返回")]),e._v(" "),s("el-button",{attrs:{loading:e.btnLoading,type:"primary"},on:{click:function(t){e.saveData("form")}}},[e.form.courseID&&e.form.courseID.length>10?s("span",[e._v("提交修改")]):s("span",[e._v("创建")])])],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"top"},[t("div",{staticClass:"tt"},[this._v("创建课程")])])}]};var c=s("VU/8")(i,n,!1,function(e){s("cO7b")},"data-v-5bee1fc9",null);t.default=c.exports},cO7b:function(e,t){}});
//# sourceMappingURL=37.2023122814742.js.map