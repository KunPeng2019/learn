webpackJsonp([46],{IDaV:function(t,s){},iJR7:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("Xxa5"),i=a.n(e),n=a("exGp"),o=a.n(n),r=a("/IqB"),l=a("VsUZ"),c={components:{courseInfo:r.a},data:function(){return{course:JSON.parse(sessionStorage.getItem("course")),courseWare:JSON.parse(sessionStorage.getItem("courseWare")),ClassPractice:JSON.parse(sessionStorage.getItem("classPractice")),taskSort:[{label:"全部",value:0},{label:"已完成",value:1},{label:"未完成",value:2}],taskDatas:[],taskName:"",taskSortName:"全部",isCourseWare:"",total:0,yesComplete:0,noComplete:0,dialogDetailVisible:!1,cpDetail:[]}},created:function(){this.initData()},methods:{initData:function(){this.isCourseWare="CourseWare"==sessionStorage.getItem("taskType"),this.isCourseWare?(this.taskName=this.courseWare.name,this.getCTDatas(0)):this.isCourseWare||(this.taskName=this.ClassPractice.title,this.getPSDatas(0))},handleCommand:function(t){this.taskSortName=t.label,this.isCourseWare?this.getCTDatas(t.value):this.isCourseWare||(this.taskName=this.ClassPractice.title,this.getPSDatas(t.value))},getCTDatas:function(t){var s=this;this.taskDatas=[],this.$http.get(this.$api.GetCoursewareTask,{classID:this.course.ClassID,cID:this.courseWare.id,sort:t}).then(function(t){t.Result&&t.Datas&&t.Datas.length>0&&(t.Datas.forEach(function(t){s.taskDatas.push({StudentName:t.Key.StudentName,XH:t.XH,isComplete:""!=t.CTID})}),s.total=t.Total,s.yesComplete=t.YesComplete,s.noComplete=t.NoComplete)}).catch(function(t){})},getPSDatas:function(t){var s=this;this.taskDatas=[],this.$http.get(this.$api.ClassPractiseGetTask,{classID:this.course.ClassID,cpID:this.ClassPractice.id,sort:t}).then(function(t){t.Result&&t.Datas&&t.Datas.length>0&&(t.Datas.forEach(function(t){s.taskDatas.push({StudentID:t.Key.StudentID,StudentName:t.Key.StudentName,XH:t.XH,PSID:t.PSID,isComplete:""!=t.PSID})}),s.total=t.Total,s.yesComplete=t.YesComplete,s.noComplete=t.NoComplete)}).catch(function(t){})},getPracticeDetail:function(t){var s=this;return o()(i.a.mark(function a(){var e;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s.cpDetail=[],s.dialogDetailVisible=!0,a.next=4,l.a.GetI_DownloadFileURL();case 4:e=a.sent,s.$http.get(s.$api.GetCPStudentAnswer,{cpID:s.ClassPractice.id,studentID:t.StudentID}).then(function(t){t.Result&&t.Datas&&t.Datas.length>0&&t.Datas.forEach(function(t){var a="未作答";null!=t.PAData&&(a=t.PAData.PAContent.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,function(t,s){var a=s.split("/")[1];return'<img src="'+e+"?filename="+a+'&fileType=7" alt="" style="width:380px"/>'}));s.cpDetail.push({PSData:t.PSData,PAContent:a,SOList:t.SOList})})}).catch(function(t){});case 6:case"end":return a.stop()}},a,s)}))()},fetchPSType:function(t){var s="";switch(t){case 1:s="单选题";break;case 2:s="多选题";break;case 3:s="判断题";break;case 4:s="问答题"}return s}}},u={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"student-task"}},[a("course-info",{attrs:{course:t.course}}),t._v(" "),a("div",{staticClass:"main"},[a("div",{staticClass:"head"},[a("div",{staticClass:"head_info"},[t.isCourseWare?a("span",[t._v("课件")]):t._e(),t._v(" "),t.isCourseWare?t._e():a("span",[t._v("练习")]),t._v("【"+t._s(t.taskName)+"】")]),t._v(" "),a("div",{staticClass:"head_stats"},[t._v("\n                班级人数："+t._s(t.total)+"，已完成："+t._s(t.yesComplete)+"，未完成："+t._s(t.noComplete)+"\n            ")]),t._v(" "),a("div",{staticClass:"head_sort"},[a("el-dropdown",{staticClass:"dropdown",on:{command:t.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[t._v(t._s(t.taskSortName)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.taskSort,function(s,e){return a("el-dropdown-item",{key:e,attrs:{command:s}},[t._v(t._s(s.label))])}),1)],1)],1)]),t._v(" "),a("div",{staticClass:"courseWareTask_list"},[a("el-row",{attrs:{gutter:20}},t._l(t.taskDatas,function(s,e){return a("el-col",{key:e,attrs:{span:6}},[a("el-card",{staticClass:"list_card",attrs:{shadow:"hover"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("img",{attrs:{src:"/static/boy_img.png",width:"70",height:"70",alt:""}})]),t._v(" "),a("el-col",{staticClass:"card_info",attrs:{span:14}},[a("div",[t._v(t._s(s.StudentName))]),t._v(" "),a("div",{staticClass:"card_line"},[a("div",{staticStyle:{"margin-top":"5px"}},[t._v(t._s(s.XH))]),t._v(" "),a("div",{staticStyle:{"margin-top":"8px"}},[s.isComplete?a("span",{staticClass:"completed1"},[t._v("已完成")]):t._e(),t._v(" "),s.isComplete?t._e():a("span",{staticClass:"completed2"},[t._v("未完成")])]),t._v(" "),t.isCourseWare?t._e():a("div",{staticStyle:{"margin-top":"10px"}},[s.isComplete?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){t.getPracticeDetail(s)}}},[t._v("查看答题")]):t._e(),t._v(" "),s.isComplete?t._e():a("el-button",{attrs:{type:"info",size:"mini",plain:"",disabled:""}},[t._v("查看答题")])],1)])])],1)],1)],1)}),1)],1)]),t._v(" "),a("el-dialog",{staticClass:"cp_detail",attrs:{title:"答题明细",visible:t.dialogDetailVisible},on:{"update:visible":function(s){t.dialogDetailVisible=s}}},t._l(t.cpDetail,function(s,e){return a("div",{key:e,staticClass:"mb"},[a("div",{staticClass:"mb"},[t._v(t._s(s.PSData.PSSerial)+". ["+t._s(t.fetchPSType(s.PSData.PSType))+"] "+t._s(s.PSData.PSScore)+"分")]),t._v(" "),a("div",{staticClass:"mb"},[t._v(t._s(s.PSData.PSContent))]),t._v(" "),a("div",{staticClass:"mb"},t._l(s.SOList,function(s,e){return a("div",{key:e,attrs:{item:s}},[t._v(t._s(s.SOSerial)+". "+t._s(s.SOContent))])}),0),t._v(" "),a("div",{staticClass:"mb"},[t._v("\n                答案：\n                "),a("span",{staticClass:"primary"},[t._v(t._s(s.PSData.PSAnswer))])]),t._v(" "),a("div",{staticClass:"mb"},[t._v("\n                解析：\n                "),a("span",{staticClass:"danger"},[t._v(t._s(s.PSData.PSanalysis))])]),t._v(" "),a("div",{staticClass:"part_title"},[t._v("学生答题")]),t._v(" "),a("div",{domProps:{innerHTML:t._s(s.PAContent)}})])}),0)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("IDaV")},null,null);s.default=d.exports}});
//# sourceMappingURL=46.2023122814742.js.map