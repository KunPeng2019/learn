webpackJsonp([39],{B57y:function(e,t){},JmzW:function(e,t,s){"use strict";(function(e){var r=s("Xxa5"),a=s.n(r),o=s("exGp"),m=s.n(o),n=s("3pLw"),i=s("VsUZ"),u=s("bBGM");t.a={components:{summerNote:u.a},data:function(){return{treeUpdata:!1,optName:"",isEdit:"",tpid:"",terms:[],courses:[],form:{TermID:"",CourseID:"",Name:"",TPgoal:"",TPMethods:"",TPArrange:"",TPAssessment:"",TPRecommend:""},rules:{Name:[{required:!0,min:2,max:25,message:"长度在 2 到 25 个字符",trigger:"blur"}]}}},mounted:function(){this.judegeSta()},methods:{judegeSta:function(){this.tpid=this.$route.query.tpid,""==this.tpid||void 0==this.tpid?this.isEdit=!1:this.isEdit=!0,this.isEdit?this.optName="修改大纲":this.optName="创建大纲",this.initData()},initData:function(){var t=m()(a.a.mark(function t(){var s,r,o,m=this;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.get(i.a.getTermsBySchool,{sid:"",Token:n.a.getToken()});case 2:return(s=t.sent).Result&&s.Datas.forEach(function(e){m.terms.push({value:e.TermID,label:e.TermName})}),t.next=6,n.a.get(i.a.getAllCourseDatas,{Token:n.a.getToken()});case 6:if((r=t.sent).Result&&r.Datas.forEach(function(e){m.courses.push({value:e.CourseID,label:e.CourseName})}),this.isEdit){t.next=19;break}this.$set(this.form,"Name",""),this.$set(this.form,"TermID",""),this.$set(this.form,"CourseID",""),e(".summernote").eq(0).summernote("code",""),e(".summernote").eq(1).summernote("code",""),e(".summernote").eq(2).summernote("code",""),e(".summernote").eq(3).summernote("code",""),e(".summernote").eq(4).summernote("code",""),t.next=33;break;case 19:return t.next=21,n.a.get(i.a.getTeachingProgramData,{id:this.tpid,Token:n.a.getToken()});case 21:if(!(o=t.sent).Result){t.next=33;break}if(null!=o.Data){t.next=25;break}return t.abrupt("return");case 25:this.form.Name=o.Data.TPName,this.form.TermID=o.Data.TermID,this.form.CourseID=o.Data.CourseID,e(".summernote").eq(0).summernote("code",o.Data.TPgoal),e(".summernote").eq(1).summernote("code",o.Data.TPMethods),e(".summernote").eq(2).summernote("code",o.Data.TPArrange),e(".summernote").eq(3).summernote("code",o.Data.TPAssessment),e(".summernote").eq(4).summernote("code",o.Data.TPRecommend);case 33:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),onSubmit:function(){var t=this;this.$refs.form.validate(function(s){if(!s)return t.$message({showClose:!0,message:"请输入正确格式",type:"error"}),!1;var r={tpid:t.tpid,termid:t.form.TermID,courseid:t.form.CourseID,tpname:t.form.Name,tpgoal:e(".summernote").eq(0).summernote("code"),tpmethods:e(".summernote").eq(1).summernote("code"),tparrange:e(".summernote").eq(2).summernote("code"),tpassessment:e(".summernote").eq(3).summernote("code"),tprecommend:e(".summernote").eq(4).summernote("code"),Token:n.a.getToken()};t.saveData(r)})},saveData:function(){var e=m()(a.a.mark(function e(t){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.post(i.a.saveTeachingProgram,t);case 2:(s=e.sent).type?this.$message({showClose:!0,message:s.message,type:s.type}):(this.$message({showClose:!0,message:"保存大纲成功",type:"success"}),this.isEdit||(this.tpid=s.Data,this.$parent.$refs.nav.updata=!0),this.$router.push({name:"programView",query:{tpid:this.tpid}}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},watch:{$route:function(e,t){this.judegeSta()}}}}).call(t,s("4kSj"))},xnQb:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("JmzW"),a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"outline-wrap"},[s("div",{staticClass:"head"},[e._v(e._s(e.optName))]),e._v(" "),s("el-form",{ref:"form",staticClass:"create-form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"大纲名称："}},[s("el-input",{attrs:{clearable:""},model:{value:e.form.Name,callback:function(t){e.$set(e.form,"Name",t)},expression:"form.Name"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"大纲学期：",prop:"TermID"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.TermID,callback:function(t){e.$set(e.form,"TermID",t)},expression:"form.TermID"}},e._l(e.terms,function(e,t){return s("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"课程名称：",prop:"CourseID"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.CourseID,callback:function(t){e.$set(e.form,"CourseID",t)},expression:"form.CourseID"}},e._l(e.courses,function(e,t){return s("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"教学目标："}},[s("summer-note",{attrs:{eqIndex:0}})],1),e._v(" "),s("el-form-item",{attrs:{label:"教学方式："}},[s("summer-note",{attrs:{eqIndex:1}})],1),e._v(" "),s("el-form-item",{attrs:{label:"教学安排及方式："}},[s("summer-note",{attrs:{eqIndex:2}})],1),e._v(" "),s("el-form-item",{attrs:{label:"考核方式"}},[s("summer-note",{attrs:{eqIndex:3}})],1),e._v(" "),s("el-form-item",{attrs:{label:"推荐教材与参考："}},[s("summer-note",{attrs:{eqIndex:4}})],1),e._v(" "),s("el-form-item",[s("div",{staticClass:"btns"},[s("el-button",{attrs:{size:"medium",type:"primary",plain:""},on:{click:e.onSubmit}},[e._v("保存")]),e._v(" "),s("el-button",{attrs:{size:"medium",type:"info",plain:""}},[e._v("取消")])],1)])],1)],1)},staticRenderFns:[]};var o=function(e){s("B57y")},m=s("VU/8")(r.a,a,!1,o,"data-v-629a51e8",null);t.default=m.exports}});
//# sourceMappingURL=39.20231227165236.js.map