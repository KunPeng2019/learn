webpackJsonp([43],{"2diQ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Xxa5"),l=a.n(o),r=a("exGp"),i=a.n(r),n=a("3pLw"),s=a("VsUZ"),c={name:"",components:{},props:{},data:function(){return{createLoading1:!1,formLabelWidth:"160px",Religionoptions:[],Bloodoptions:[],GATQWoptions:[],Politicaloptions:[],TeacherID:"",userid:"",username:"",OneChildoptions:[{value:"0",label:"不是独生子女"},{value:"1",label:"是独生子女"}],form:{BirthPlace:"",NativePlace:"",IDNo:"",IDValid:"",Religion:"",GATQW:"",Political:"",OneChild:"",Blood:"",WorkingDate:""},rules:{}}},computed:{},watch:{},mounted:function(){var e=n.a.getUser();e&&(this.userid=e.UserID,this.username=e.UserName),this.Initdata(),this.getdata()},methods:{Initdata:function(){var e=this;return i()(l.a.mark(function t(){var a,o;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.Politicaloptions=[],e.Bloodoptions=[],e.Religionoptions=[],e.GATQWoptions=[],e.getMetadatas("GB/T 4762",e.Politicaloptions),e.getMetadatas("JY/T 1001 XX",e.Bloodoptions),e.getMetadatas("GA 214.12",e.Religionoptions),e.getMetadatas("JY/T 1001 GATQW",e.GATQWoptions),t.next=10,n.a.get(s.a.getNatAllData,{Token:n.a.getToken()});case 10:(a=t.sent).type||(o=[],a.Datas.forEach(function(t){o.push({value:t.NationalityCode,label:t.NationalityShortName}),e.Natoptions=o}));case 12:case"end":return t.stop()}},t,e)}))()},getdata:function(){var e=this;return i()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.get(s.a.getBasicInfo,{uid:e.userid,Token:n.a.getToken()});case 2:(a=t.sent).Result?null!=a.Data&&a.Data.length>0&&(e.TeacherID=a.Data[0].TeacherID,e.form.BirthPlace=a.Data[0].TeacherBirthPlace,e.form.NativePlace=a.Data[0].TeacherNativePlace,e.form.IDNo=a.Data[0].TeacherIDNO,e.form.IDValid=a.Data[0].TeacherIDValid,e.form.Religion=a.Data[0].TeacherReligion,e.form.GATQW=a.Data[0].TeacherGATQWM,e.form.Political=a.Data[0].TeacherPolitical,e.form.OneChild=a.Data[0].TeacherOneChild,e.form.Blood=a.Data[0].TeacherBlood,e.form.WorkingDate=a.Data[0].TeacherWorkingDate):e.$message({showClose:!0,message:a.message,type:a.type});case 4:case"end":return t.stop()}},t,e)}))()},comfirmFormHandler:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({showClose:!0,message:"请输入正确格式",type:"error"}),!1;t.savesubmit()})},savesubmit:function(){var e=i()(l.a.mark(function e(){var t,a,o,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.createLoading1=!0,t="",this.form.IDValid&&(a=new Date(this.form.IDValid),t=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()),o="","-"!=this.form.WorkingDate&&""!=this.form.WorkingDate&&(console.dir(this.form.WorkingDate),r=new Date(this.form.WorkingDate),o=r.getFullYear()+("0"+(r.getMonth()+1)).slice(-2)),this.saveData({id:this.TeacherID,userid:this.userid,BirthPlace:this.form.BirthPlace,NativePlace:this.form.NativePlace,IDNo:this.form.IDNo,IDValid:t,Religion:this.form.Religion,GATQW:this.form.GATQW,Political:this.form.Political,OneChild:this.form.OneChild,Blood:this.form.Blood,WorkingDate:o,Token:n.a.getToken()});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),saveData:function(e){var t=this;return i()(l.a.mark(function a(){var o;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.a.post(s.a.updatePersonThc,e);case 2:(o=a.sent).Result?t.$message({showClose:!0,message:"数据保存成功！",type:"success"}):t.$message({showClose:!0,message:o.message,type:o.type}),t.createLoading1=!1;case 5:case"end":return a.stop()}},a,t)}))()},resetForm:function(){this.$refs.form.resetFields(),this.$refs.form.clearValidate()},getMetadatas:function(e,t){var a=this;return i()(l.a.mark(function o(){var r;return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.a.get(s.a.getMetadataTrees,{code:e,token:n.a.getToken()});case 2:(r=o.sent).Result?r.Datas.forEach(function(a){a.MetadataCode!=e&&t.push({value:a.MetadataCode,label:a.MetadataName})}):a.$message({showClose:!0,message:r.message,type:r.type});case 4:case"end":return o.stop()}},o,a)}))()}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"basicINfo"}},[a("div",{staticClass:"main"},[a("div",{staticClass:"tt"},[e._v("个人资料")]),e._v(" "),a("el-form",{ref:"form",staticStyle:{"margin-top":"60px",width:"60%"},attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"出生地：","label-width":e.formLabelWidth,prop:"BirthPlace",placement:"right"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.BirthPlace,callback:function(t){e.$set(e.form,"BirthPlace",t)},expression:"form.BirthPlace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"籍贯：","label-width":e.formLabelWidth,prop:"NativePlace",placement:"right"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.NativePlace,callback:function(t){e.$set(e.form,"NativePlace",t)},expression:"form.NativePlace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"证件号码：","label-width":e.formLabelWidth,prop:"IDNo"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.IDNo,callback:function(t){e.$set(e.form,"IDNo",t)},expression:"form.IDNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"证件有效期：","label-width":e.formLabelWidth,prop:"IDValid",placement:"right"}},[a("el-date-picker",{attrs:{type:"date",clearable:""},model:{value:e.form.IDValid,callback:function(t){e.$set(e.form,"IDValid",t)},expression:"form.IDValid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"信仰宗教：","label-width":e.formLabelWidth,prop:"Religion",loading:!0}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.Religion,callback:function(t){e.$set(e.form,"Religion",t)},expression:"form.Religion"}},e._l(e.Religionoptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"港澳台侨外：","label-width":e.formLabelWidth,prop:"GATQW",loading:!0}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.GATQW,callback:function(t){e.$set(e.form,"GATQW",t)},expression:"form.GATQW"}},e._l(e.GATQWoptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"政治面貌：","label-width":e.formLabelWidth,prop:"Political",loading:!0}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.Political,callback:function(t){e.$set(e.form,"Political",t)},expression:"form.Political"}},e._l(e.Politicaloptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否独生子女：","label-width":e.formLabelWidth,prop:"OneChild",loading:!0}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.OneChild,callback:function(t){e.$set(e.form,"OneChild",t)},expression:"form.OneChild"}},e._l(e.OneChildoptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"血型码：","label-width":e.formLabelWidth,prop:"Blood",loading:!0}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.Blood,callback:function(t){e.$set(e.form,"Blood",t)},expression:"form.Blood"}},e._l(e.Bloodoptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"工作年月：","label-width":e.formLabelWidth,prop:"WorkingDate",placement:"right"}},[a("el-date-picker",{attrs:{type:"month",clearable:""},model:{value:e.form.WorkingDate,callback:function(t){e.$set(e.form,"WorkingDate",t)},expression:"form.WorkingDate"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.createLoading1,type:"primary"},on:{click:function(t){e.comfirmFormHandler("form")}}},[a("i",{staticClass:"el-icon-check el-icon--left"}),e._v("保 存\n      ")]),e._v(" "),a("el-button",{on:{click:e.resetForm}},[a("i",{staticClass:"el-icon-close el-icon--left"}),e._v("重 置\n      ")])],1)],1)])},staticRenderFns:[]};var m=a("VU/8")(c,f,!1,function(e){a("G3wV")},null,null);t.default=m.exports},G3wV:function(e,t){}});
//# sourceMappingURL=43.20231227165236.js.map