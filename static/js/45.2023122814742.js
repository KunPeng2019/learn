webpackJsonp([45],{Luci:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("mvHQ"),i=s.n(n),a=s("Xxa5"),o=s.n(a),r=s("exGp"),c=s.n(r),l=s("VsUZ"),u=s("3pLw"),d=s("NC6I"),f=s.n(d),g=s("vB9k"),p={data:function(){return{iconfont:"icon-FJRH",Neutral:!1,formLoading:!1,active:!0,checked:!1,form:{user:"",pwd:""},formShow:!0,loading:!1,loadConfig:!0,UnifiedLogin:!0,UnifiedLoginType:0,password:"password",rules:{user:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:25,message:"用户名长度在 2 到 25 个字符",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{min:1,max:32,message:"密码长度在 1 到 32 个字符",trigger:"blur"}]}}},mounted:function(){var e=this;return c()(o.a.mark(function t(){var s,n,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.checked="true"===g.a.get("isSavePwd"),1==e.checked&&null!=g.a.get("loginInfo")&&(s=JSON.parse(g.a.get("loginInfo")),e.form.user=s.username,e.form.pwd=s.userpwd),t.next=4,e.$root.GetSrvConfig();case 4:return n=t.sent,e.Neutral=n.Neutral,e.iconfont=e.Neutral&&1==e.Neutral?"icon-shu2":"icon-FJRH",t.next=9,u.a.get(l.a.getConfigInfo);case 9:if(i=t.sent,e.loading=!1,!i.type){t.next=15;break}e.$message({dangerouslyUseHTMLString:!0,showClose:!0,message:i.message,type:i.type}),t.next=29;break;case 15:e.loadConfig=!1,e.UnifiedLogin=!1,e.UnifiedLoginType=i.Datas.UnifiedLogin,t.t0=i.Datas.UnifiedLogin,t.next=0===t.t0?21:1===t.t0?22:2===t.t0?23:3===t.t0?27:29;break;case 21:case 22:return t.abrupt("break",29);case 23:return e.UnifiedLogin=!0,window.localStorage.setItem("UnifiedloginURL",i.Datas.UnifiedloginURL),window.localStorage.setItem("UnifiedloginOutUrl",i.Datas.UnifiedloginOutUrl),t.abrupt("break",29);case 27:return e.UnifiedLogin=!0,t.abrupt("break",29);case 29:e.isPCjoin(),1==e.$route.query.relogin&&(e.$message({message:"token过期或已丢失，请重新登录",type:"warning"}),g.a.delete(l.a.cookie.token));case 31:case"end":return t.stop()}},t,e)}))()},methods:{login:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.loading=!0,e.loginAjax(e.form.user,f()(e.form.pwd)))})},Unifiedlogin:function(){var e=this;3==this.UnifiedLoginType?this.$refs.form.validate(function(t){t&&e.UnifiedloginAjax()}):window.location.href=window.localStorage.getItem("UnifiedloginURL")},UnifiedloginAjax:function(){var e=this;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.get(l.a.ComparePwdByName,{username:e.form.user,pwd:e.form.pwd});case 2:t.sent.type?e.checkThirdPartyUserByLDAP(e.form.user,e.form.pwd):e.loginAjax(e.form.user,f()(e.form.pwd));case 4:case"end":return t.stop()}},t,e)}))()},checkThirdPartyUserByLDAP:function(e,t){var s=this;return c()(o.a.mark(function n(){var i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.post(l.a.checkThirdPartyUserByLDAP,{username:e,pwd:t});case 2:(i=n.sent).type?s.$message({message:i.message,type:"warning"}):s.loginAjax(e,f()(t));case 4:case"end":return n.stop()}},n,s)}))()},seePwd:function(){"text"==this.password?this.password="password":this.password="text"},keyNext:function(e){13==e.keyCode&&document.getElementById("loginPwd").focus()},keyEnter:function(e){13==e.keyCode&&this.login()},isSavePwd:function(e){1==e?(g.a.set("isSavePwd",!0),this.savepwd()):g.a.set("isSavePwd",!1)},savepwd:function(){if(""==this.form.user)return this.$message({dangerouslyUseHTMLString:!0,showClose:!0,message:"请先填写用户名",type:"warming"}),void(this.checked=!1);if(""==this.form.pwd)return this.$message({dangerouslyUseHTMLString:!0,showClose:!0,message:"请先填写密码",type:"warming"}),void(this.checked=!1);var e={username:this.form.user,userpwd:this.form.pwd};g.a.set("loginInfo",i()(e))},loginAjax:function(e,t){var s=this;return c()(o.a.mark(function n(){var a,r,c;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.post(l.a.login,{name:e,pwd:t,from:"11"});case 2:a=n.sent,s.loading=!1,a.type?s.$message({dangerouslyUseHTMLString:!0,showClose:!0,message:a.message,type:a.type}):(r=a.UserInfo.UserType,g.a.set(l.a.cookie.user_infor,i()(a.UserInfo)),g.a.set(l.a.cookie.token,a.Data),g.a.set("loginType","0"),1==r?g.a.set(l.a.cookie.thc_infor,i()(a.Teacher)):g.a.set(l.a.cookie.stu_infor,i()(a.Student)),s.formLoading=!1,s.$route.query.relogin&&(c=window.sessionStorage.getItem("last_path"))&&c.indexOf("login")<0?window.location.href=c:s.tolist(r));case 5:case"end":return n.stop()}},n,s)}))()},tolist:function(e){switch(e){case 1:this.$router.push("/main/teacherSpace/teacherEvaluate/list");break;case 2:this.$router.push("/main/studentSpace/task/list")}},isPCjoin:function(){if(this.$route.query.u&&this.$route.query.p){this.formLoading=!0;var e=this.$route.query.u,t=this.$route.query.p;this.loginAjax(e,t)}}}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container"},[n("div",{staticClass:"login"},[n("div",{staticClass:"login-pannel"},[n("div",{staticClass:"header"},[n("span",{staticClass:"login-title"},[e._v("用户登录")]),e._v(" "),n("span",{staticClass:"btn-scan",class:{"btn-form":!e.formShow},on:{click:function(t){e.formShow=!e.formShow}}})]),e._v(" "),n("div",{staticClass:"login-form"},[e.formShow?n("div",{staticClass:"fieldset"},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"form",attrs:{model:e.form,rules:e.rules}},[n("el-form-item",{staticStyle:{"margin-bottom":"2.5px"},attrs:{prop:"user"}},[n("el-input",{staticClass:"login-input",class:{loginActive:e.active},attrs:{placeholder:"请输入用户名",clearable:"",autofocus:"autofocus"},on:{focus:function(t){e.active=!0}},nativeOn:{keyup:function(t){e.keyNext(t)}},model:{value:e.form.user,callback:function(t){e.$set(e.form,"user",t)},expression:"form.user"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"iconfont icon-user"})])],2)],1),e._v(" "),n("el-form-item",{attrs:{prop:"pwd"}},[n("el-input",{staticClass:"login-input",class:{loginActive:!e.active},staticStyle:{"margin-bottom":"-8px",border:"none"},attrs:{id:"loginPwd",type:e.password,placeholder:"请输入密码"},on:{focus:function(t){e.active=!1}},nativeOn:{keyup:function(t){e.keyEnter(t)}},model:{value:e.form.pwd,callback:function(t){e.$set(e.form,"pwd",t)},expression:"form.pwd"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"iconfont icon-weibiaoti1"})]),e._v(" "),n("template",{slot:"suffix"},[n("i",{staticClass:"iconfont",class:{"icon-biyanjing":"password"==e.password,"icon-17yanjing2":"text"==e.password},on:{click:e.seePwd}})])],2)],1)],1)],1):e._e(),e._v(" "),e.formShow?n("el-button",{staticClass:"login-form-btn",attrs:{type:"primary",loading:e.loading},on:{click:e.login}},[e._v("登录")]):e._e(),e._v(" "),e.formShow&&e.UnifiedLogin?n("el-button",{staticClass:"Unifiedlogin-form-btn",staticStyle:{"margin-left":"0px"},attrs:{loading:e.loadConfig,type:"danger"},on:{click:e.Unifiedlogin}},[e._v("统一登录")]):e._e(),e._v(" "),e.formShow?n("div",{staticClass:"forget-btn"},[n("span",[e._v("忘记密码")]),e._v(" "),[n("el-checkbox",{staticStyle:{"margin-left":"143px","margin-top":"2px"},on:{change:e.isSavePwd},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),n("span",{staticClass:"savepwd"},[e._v("记住密码")])]],2):e._e(),e._v(" "),e.formShow?e._e():n("div",{staticClass:"er-code"},[n("div",{staticClass:"code-img-box"},[n("img",{attrs:{src:s("ygka"),alt:"",draggable:!1}})]),e._v("打开手机，扫描二维码\n          "),e._m(0)])],1)])]),e._v(" "),n("div",{staticClass:"footer"},[e._v("\n    闽ICP18002063号-1\n    "),e.Neutral?e._e():n("span",[e._v("睿和科技")]),e._v("\n    -Copyright  ©  "+e._s((new Date).getFullYear())+"  \n    "),e.Neutral?e._e():n("span",[e._v("睿和科技")])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"er-code-sub"},[s("div",{staticClass:"er-code-item"},[s("i",{staticClass:"iconfont icon-icon-test"}),e._v(" "),s("span",{staticClass:"text"},[e._v("免输入")])]),e._v(" "),s("div",{staticClass:"er-code-item"},[s("i",{staticClass:"iconfont icon-serviceshandiantuikuan"}),e._v(" "),s("span",{staticClass:"text"},[e._v("更快")])]),e._v(" "),s("div",{staticClass:"er-code-item"},[s("i",{staticClass:"iconfont icon-anquanbaozhang"}),e._v(" "),s("span",{staticClass:"text"},[e._v("更安全")])])])}]};var v=s("VU/8")(p,m,!1,function(e){s("nDKN")},null,null);t.default=v.exports},nDKN:function(e,t){}});
//# sourceMappingURL=45.2023122814742.js.map