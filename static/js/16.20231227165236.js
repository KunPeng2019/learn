webpackJsonp([16],{"9bNi":function(t,e){},AoHQ:function(t,e){},JC9W:function(t,e,s){"use strict";(function(t){var a=s("Dd8w"),i=s.n(a),n=s("Xxa5"),o=s.n(n),c=s("exGp"),r=s.n(c),l=s("UssV"),u=s("+GZO"),m=s("9v5J"),p=s("VsUZ");e.a={components:{DoAnswer:l.a,commonCard:u.a,bottomPager:m.a},data:function(){return{total:0,currentPage:1,pagesize:20,estate:1,activeName:"first",cardOption:{icon:"icon-homework",btnText:"去完成"},dialogPSVisible:!1,dialogDetailVisible:!1,cards:[],psData:[],paData:[],soData:[],cpDetail:[],practiceAnswer:"",ableReply:!1,currentIndex:1,cid:"",cpID:"",plID:"",plTotal:0,plScore:0,dialogVisible:!1,formComment:{id:"",courseID:"",coursewareID:"",comment:"",anonymous:!1,score:100},rulesComment:{comment:{required:!0,min:1,max:500,message:"长度在 1 到 500 个字符",trigger:"blur"},score:[{required:!0,message:"课程评分不能为空"},{type:"number",message:"课程评分必须为数字值"}]},btnLoading:!1}},mounted:function(){this.GetStudentTaskDatas()},methods:{tabClick:function(t){this.currentPage=1,this.activeName=t.name,"second"===this.activeName?this.estate=2:this.estate=1,this.GetStudentTaskDatas()},GetStudentTaskDatas:function(){var t=this;this.cards=[],this.$http.get(this.$api.GetStudentTaskDatas,{pno:this.currentPage,psize:this.pagesize,estate:this.estate,stuid:this.$http.getStu().StudentID}).then(function(e){e.Result&&(e.Datas,e.Datas.length>0&&(t.total=e.rowsCount,e.Datas.forEach(function(e){var s=[],a=1==e.Attribute?"课前":"课后",i=1==e.type?"课件":"随堂练习",n="";n="second"===t.activeName?1==e.type?"重新下载":"预览":1==e.type?"下载":"去完成",s.push({warn:!1,flag:1==e.Attribute,time:e.CreateTime,teachername:e.TeacherName,coursename:e.CourseName,type:i,attribute:a,btnText:n}),t.cards.push({id:e.id,sid:e.sid,cid:e.CourseID,sname:e.stitle,title:e.stitle,descs:s})})))}).catch(function(t){})},pageChange:function(t){this.currentPage=t,this.GetStudentTaskDatas()},clickHandler:function(t){var e=this;if("预览"===t.descs[0].btnText)this.cid=t.cid,this.cpID=t.id,this.plID=t.sid,this.GetPLStatsByPLID(),this.getPracticeDetail();else if("课件"==t.descs[0].type){var s="";this.$http.get(this.$api.getConfigInfo,"").then(function(a){a.Result&&(s=a.Datas.SkyDevicePath,e.downloadFile(t.id,t.sid,s))}).catch(function(t){})}else"随堂练习"==t.descs[0].type&&(this.cid=t.cid,this.cpID=t.id,this.plID=t.sid,this.dialogPSVisible=!0,this.GetPLStatsByPLID(),this.GetPSAndPA())},AddStuCoursewareTask:function(t,e){var s=this;this.$http.post(this.$api.AddStuCoursewareTask,{cid:t,stuid:this.$http.getStu().StudentID}).then(function(t){t.Result&&(s.$message({dangerouslyUseHTMLString:!0,showClose:!0,message:"数据下载成功！",type:"success"}),s.GetStudentTaskDatas())}).catch(function(t){})},downloadFile:function(t,e,s){var a=this;this.$http.get(this.$api.getMaterialDataByID,{ids:e,Token:this.$http.getToken()}).then(function(s){if(s.Result){var i=a.$api.DownloadFileByMIDURL;window.location.href=i+"?mid="+e,a.AddStuCoursewareTask(t,e)}}).catch(function(t){})},GetPLStatsByPLID:function(){var t=this;this.$http.get(this.$api.ClassPractisePLStatsByPLID,{plID:this.plID}).then(function(e){e.Result&&(t.plTotal=e.Total,t.plScore=e.Score)}).catch(function(t){})},GetPSAndPA:function(){var t=this;return r()(o.a.mark(function e(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.psData=[],t.paData=[],t.soData=[],t.practiceAnswer="",e.next=6,p.a.GetI_DownloadFileURL();case 6:s=e.sent,t.$http.get(t.$api.ClassPractiseGetPSAndPA,{cpID:t.cpID,plid:t.plID,psserial:t.currentIndex,StudentID:t.$http.getStu().StudentID}).then(function(e){if(e.Result&&(t.psData=e.PSData,t.paData=e.PAData,t.soData=e.SOData,null!=t.paData))if(4==t.psData.PSType){var a=t.paData.PAContent.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,function(t,e){var a=e.split("/")[1];return'<img src="'+s+"?filename="+a+'&fileType=7" alt="" />'});t.practiceAnswer=a}else t.practiceAnswer=t.paData.PAContent}).catch(function(t){});case 8:case"end":return e.stop()}},e,t)}))()},fetchPSType:function(t){var e="";switch(t){case 1:e="单选题";break;case 2:e="多选题";break;case 3:e="判断题";break;case 4:e="问答题"}return e},answerChange:function(t){this.practiceAnswer=t},submitAnswer:function(e){var s=this,a=t(".summernote").summernote("code");if(a.length>0&&(this.practiceAnswer=a.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,function(t,e){return'<img src="picture/'+(e.indexOf("=")>-1?e.split("=")[1].split("&")[0]:"")+'/7" alt="" style="width:380px;"/>'})),this.practiceAnswer){var i={cpid:this.cpID,paid:null==this.paData?"":this.paData.PAID,courseID:this.cid,psID:this.psData.PSID,studentID:this.$http.getStu().StudentID,paContent:this.practiceAnswer};this.$http.post(this.$api.ClassPractiseSubmitAnswer,i).then(function(t){t.Result?s.currentIndex==s.plTotal&&e>0?s.submitPractice():(s.currentIndex+=e,s.GetPSAndPA()):t.Info&&s.$message({showClose:!0,message:t.Info,type:"error"})}).catch(function(t){})}else this.$message({showClose:!0,message:"请作答",type:"error"})},resetForm:function(){this.dialogPSVisible=!1,this.currentIndex=1,this.practiceAnswer=""},getPracticeDetail:function(){var t=this;return r()(o.a.mark(function e(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.cpDetail=[],t.dialogDetailVisible=!0,e.next=4,p.a.GetI_DownloadFileURL();case 4:s=e.sent,t.$http.get(t.$api.GetCPStudentAnswer,{cpID:t.cpID,studentID:t.$http.getStu().StudentID}).then(function(e){e.Result&&e.Datas&&e.Datas.length>0&&e.Datas.forEach(function(e){var a="未作答";null!=e.PAData&&(a=e.PAData.PAContent.replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,function(t,e){var a=e.split("/")[1];return'<img src="'+s+"?filename="+a+'&fileType=7" alt="" style="width:380px;" />'}));t.cpDetail.push({PSData:e.PSData,PAContent:a,SOList:e.SOList})})}).catch(function(t){});case 6:case"end":return e.stop()}},e,t)}))()},submitPractice:function(){var t=this;this.$http.post(this.$api.ClassPractiseSubmitPractise,{cpID:this.cpID,studentID:this.$http.getStu().StudentID}).then(function(e){e.Result&&(t.resetForm(),t.GetStudentTaskDatas(),t.$message({message:"提交成功",type:"success"}))}).catch(function(t){})},clickComment:function(t){this.formComment={id:"",courseID:t.cid,coursewareID:t.id,studentID:this.$http.getStu().StudentID,comment:"",anonymous:!1,score:100},this.getCourseWareEvaluate(),this.dialogVisible=!0},getCourseWareEvaluate:function(){var t=this,e={courseID:this.formComment.courseID,studentID:this.$http.getStu().StudentID,cID:this.formComment.coursewareID};this.$http.get(this.$api.CoursewareCommentData,e).then(function(e){e.Result&&e.Data&&(t.formComment.id=e.Data.CCID,t.formComment.comment=e.Data.Comment,t.formComment.score=e.Data.Score,t.formComment.anonymous=!!e.Data.IsAnonymous)})},saveForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message({showClose:!0,message:"请输入正确格式",type:"error"}),!1;e.btnLoading=!0;var s={ccID:e.formComment.id,courseID:e.formComment.courseID,cID:e.formComment.coursewareID,studentID:e.$http.getStu().StudentID,score:e.formComment.score,comment:e.formComment.comment,isAnonymous:e.formComment.anonymous?1:0,type:2};e.$http.post(e.$api.CoursewareCommentSave,s).then(function(t){t.Result?(e.dialogVisible=!1,e.$message({message:"提交成功！",type:"success"})):t.message&&e.$message(i()({showClose:!0},t)),e.btnLoading=!1}).catch(function(t){e.btnLoading=!1})})}}}}).call(e,s("4kSj"))},JM8D:function(t,e,s){"use strict";(function(t){var a=s("oAV5"),i=s("bBGM");e.a={components:{summerNote:i.a},props:{questionType:{type:Number},questionOption:{type:Number,default:0},btnName:{type:String,default:"提交"},modulePicture:{type:Number,default:1},answerValue:{type:String,default:""}},data:function(){return{judgeChoice:["对","错"],multiValue:this.selectValue?this.selectValue.split(""):[],selectValue:this.answerValue}},mounted:function(){},methods:{selectAnswer:function(t){if(2===this.questionType){var e=this.multiValue.indexOf(t);e>-1?this.multiValue.splice(e,1):this.multiValue.push(t),this.selectValue=this.multiValue.sort().join("")}else this.selectValue=t;this.backValue()},editorChange:function(t){this.selectValue=t,this.backValue()},backValue:function(){this.$emit("change",this.selectValue)}},computed:{selectOptions:function(){return 1===this.questionType?Object(a.e)(this.questionOption):2===this.questionType?Object(a.e)(this.questionOption):3===this.questionType?this.judgeChoice:""}},watch:{questionType:function(e,s){4!==e&&(t(".summernote").summernote("code",""),t(".summernote").summernote("destroy"))},answerValue:function(e,s){e!==this.selectValue&&(this.selectValue=e,this.multiValue=this.selectValue?this.selectValue.split(""):[]),t("#summernote").summernote("reset"),setTimeout(function(){t(".summernote").summernote("code",e.length>0?e:"")},500)}}}}).call(e,s("4kSj"))},UssV:function(t,e,s){"use strict";var a=s("JM8D"),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[1===t.questionType?s("div",{staticClass:"selects"},[s("div",{staticClass:"content"},[s("div",{staticClass:"prompt"},[t._v("请选择正确的答案")]),t._v(" "),s("div",{staticClass:"all-select"},t._l(t.selectOptions,function(e,a){return s("div",{key:a,staticClass:"select-item",class:t.answerValue===e?"singel-selected":"",on:{click:function(s){t.selectAnswer(e)}}},[t._v(t._s(e)+"\n        ")])}),0)])]):2===t.questionType?s("div",{staticClass:"selects"},[s("div",{staticClass:"content"},[s("div",{staticClass:"prompt"},[t._v("请选择正确的答案")]),t._v(" "),s("div",{staticClass:"all-select"},t._l(t.selectOptions,function(e,a){return s("div",{key:a,staticClass:"select-item",class:t.answerValue.indexOf(e)>-1?"singel-selected":"",on:{click:function(s){t.selectAnswer(e)}}},[t._v(t._s(e)+"\n        ")])}),0)])]):3===t.questionType?s("div",{staticClass:"answers"},[s("div",{staticClass:"prompt"},[t._v("请选择正确的答案")]),t._v(" "),s("div",{staticClass:"buttons"},t._l(t.judgeChoice,function(e,a){return s("div",{key:a,class:t.answerValue===e?"selected":"",on:{click:function(s){t.selectAnswer(e)}}},[t._v(t._s(e)+"\n      ")])}),0)]):s("div",{staticClass:"answers"},[s("div",{staticClass:"prompt"},[t._v("请将您的答案写在下方的编辑框中")]),t._v(" "),s("summer-note",{ref:"summerNote",attrs:{filetype:7}})],1),t._v(" "),t._t("default")],2)},staticRenderFns:[]};var n=function(t){s("AoHQ")},o=s("VU/8")(a.a,i,!1,n,"data-v-9a469b88",null);e.a=o.exports},ji4i:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("JC9W"),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"personnal-detail-wrap"},[s("div",{staticClass:"personnal-detail-wrap-title"},[t._v("我的任务")]),t._v(" "),s("el-tabs",{staticClass:"personnal-detail-wrap-tabs",on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"未完成",name:"first"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"已完成",name:"second"}})],1),t._v(" "),s("div",{staticClass:"personnal-detail-wrap-container"},t._l(t.cards,function(e,a){return s("common-card",{key:a,attrs:{option:t.cardOption,datas:e,status:t.estate},on:{clickHandler:t.clickHandler,clickComment:t.clickComment}})}),1),t._v(" "),s("bottom-pager",{attrs:{total:t.total,pageSize:t.pagesize,currentPage:t.currentPage},on:{change:t.pageChange}}),t._v(" "),s("el-dialog",{staticClass:"cp_detail",attrs:{title:"随堂练习",visible:t.dialogPSVisible,"before-close":t.resetForm},on:{"update:visible":function(e){t.dialogPSVisible=e}}},[s("div",{staticClass:"cp_title"},[t._v("题数："+t._s(t.plTotal)+"，总分："+t._s(t.plScore))]),t._v(" "),s("div",{staticClass:"mb"},[s("div",{staticClass:"mb"},[t._v(t._s(t.psData.PSSerial)+". ["+t._s(t.fetchPSType(t.psData.PSType))+"] "+t._s(t.psData.PSScore)+"分")]),t._v(" "),s("div",{staticClass:"mb"},[t._v(t._s(t.psData.PSContent))]),t._v(" "),1===t.psData.PSType||2===t.psData.PSType?s("div",{staticClass:"mb"},t._l(t.soData,function(e,a){return s("div",{key:a,attrs:{item:e}},[t._v(t._s(e.SOSerial)+". "+t._s(e.SOContent)+"\n        ")])}),0):t._e(),t._v(" "),s("do-answer",{attrs:{"question-type":t.psData.PSType,"question-option":t.psData.PSOption,"answer-value":t.practiceAnswer,"module-picture":7},on:{change:t.answerChange}}),t._v(" "),s("div",{staticClass:"footer"},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.currentIndex>1,expression:"currentIndex> 1"}],attrs:{type:"success"},on:{click:function(e){t.submitAnswer(-1)}}},[t._v("上一题")]),t._v(" "),t.currentIndex<t.plTotal?s("el-button",{attrs:{type:"success"},on:{click:function(e){t.submitAnswer(1)}}},[t._v("下一题")]):t.currentIndex==t.plTotal?s("el-button",{attrs:{type:"success"},on:{click:function(e){t.submitAnswer(1)}}},[t._v("提交练习")]):t._e()],1)],1)]),t._v(" "),s("el-dialog",{staticClass:"cp_detail",attrs:{title:"答题明细",visible:t.dialogDetailVisible},on:{"update:visible":function(e){t.dialogDetailVisible=e}}},[s("div",{staticClass:"cp_title"},[t._v("题数："+t._s(t.plTotal)+"，总分："+t._s(t.plScore))]),t._v(" "),t._l(t.cpDetail,function(e,a){return s("div",{key:a,staticClass:"mb"},[s("div",{staticClass:"mb"},[t._v(t._s(e.PSData.PSSerial)+". ["+t._s(t.fetchPSType(e.PSData.PSType))+"] "+t._s(e.PSData.PSScore)+"分")]),t._v(" "),s("div",{staticClass:"mb"},[t._v(t._s(e.PSData.PSContent))]),t._v(" "),1===e.PSData.PSType||2===e.PSData.PSType?s("div",{staticClass:"mb"},t._l(e.SOList,function(e,a){return s("div",{key:a,attrs:{item:e}},[t._v(t._s(e.SOSerial)+".\n          "+t._s(e.SOContent)+"\n        ")])}),0):t._e(),t._v(" "),s("div",{staticClass:"mb"},[t._v("\n        答案：\n        "),s("span",{staticClass:"primary"},[t._v(t._s(e.PSData.PSAnswer))])]),t._v(" "),s("div",{staticClass:"mb"},[t._v("\n        解析：\n        "),s("span",{staticClass:"danger"},[t._v(t._s(e.PSData.PSanalysis))])]),t._v(" "),s("div",{staticClass:"part_title"},[t._v("我的答题")]),t._v(" "),s("div",{domProps:{innerHTML:t._s(e.PAContent)}})])})],2),t._v(" "),s("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"课件评价",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-form",{ref:"formComment",attrs:{model:t.formComment,rules:t.rulesComment,size:"small","label-width":"80px"}},[s("el-form-item",{attrs:{label:"课件评分",prop:"score"}},[s("el-input-number",{attrs:{min:1,max:100,label:"课件评分","controls-position":"right",precision:0,step:1},model:{value:t.formComment.score,callback:function(e){t.$set(t.formComment,"score",e)},expression:"formComment.score"}}),t._v("\n        分\n      ")],1),t._v(" "),s("el-form-item",{attrs:{label:"课件评价",prop:"comment"}},[s("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:10},placeholder:"请输入课件评价",maxlength:"500","show-word-limit":!0},model:{value:t.formComment.comment,callback:function(e){t.$set(t.formComment,"comment",e)},expression:"formComment.comment"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"",prop:"comment"}},[s("el-checkbox",{model:{value:t.formComment.anonymous,callback:function(e){t.$set(t.formComment,"anonymous",e)},expression:"formComment.anonymous"}},[t._v("匿名评价")])],1),t._v(" "),s("div",{staticStyle:{"text-align":"right"}},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{loading:t.btnLoading,type:"primary"},on:{click:function(e){t.saveForm("formComment")}}},[t._v("\n          "+t._s(t.formComment.id?"更新评价":"保存")+"\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var n=function(t){s("9bNi")},o=s("VU/8")(a.a,i,!1,n,"data-v-19fe9c74",null);e.default=o.exports}});
//# sourceMappingURL=16.20231227165236.js.map